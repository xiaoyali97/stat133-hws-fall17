cex.names = 0.7, ylim=c(-1,1)
)
abline(h = 0)
coefficient
#alternative
coefficient <- merge.data.frame(
cor(nba_dat$EFF, nba_dat[,c("PTS", "REB", "AST", "STL", "BLK")]),
cor(nba_dat$EFF, - nba_dat[,c("Missed_FG", "Missed_FT", "TO")])
)
coefficient <- as.double(as.vector(coefficient[1,]))
coefficient
coefficient[order(coefficient, decreasing = TRUE)]
barplot(coefficient, col = c("grey", "red"))
coefficient <- as.double(as.vector(coefficient[1,], labels = TRUE))
cor_coefficients <- cor_coefficients[order(cor_coefficients, decreasing = TRUE)]
cor_coefficients
barplot(cor_coefficients, main = "Correlations between Player Stats and EFF",
col = c("grey", "orange")[(cor_coefficients > 0) + 1] , border = FALSE,
cex.names = 0.7, ylim=c(-1,1)
)
abline(h = 0)
plot(nba_dat$EFF, nba_dat$Salary)
plot(nba_dat$EFF, nba_dat$Salary, pch = 19, cex = 0.8, col = "#5555555")
plot(nba_dat$EFF, nba_dat$Salary, pch = 19, cex = 0.8, col = "#55555555")
plot(nba_dat$EFF, nba_dat$Salary, pch = 16, cex = 0.8, col = rgb(1, 0.5, 0, 0.3))
plot(nba_dat$EFF, nba_dat$Salary, pch = 16, col = rgb(1, 0.5, 0, 0.3),
main = "Regression and Lowess lines", xlab = "EFF", ylab = "Salary")
#scatterplot between Efficiency and Salary
plot(nba_dat$EFF, nba_dat$Salary, pch = 16, col = rgb(1, 0.5, 0, 0.3),
main = "Scatterplot of Efficiency and Salary", xlab = "EFF", ylab = "Salary")
#lowess smooth line
line(lowess(nba_dat$EFF, nba_dat$Salary), lwd = 3, col = "Green")
#scatterplot between Efficiency and Salary
plot(nba_dat$EFF, nba_dat$Salary, pch = 16, col = rgb(1, 0.5, 0, 0.3),
main = "Scatterplot of Efficiency and Salary", xlab = "EFF", ylab = "Salary")
#lowess smooth line
lines(lowess(nba_dat$EFF, nba_dat$Salary), lwd = 3, col = "Green")
#scatterplot between Efficiency and Salary
plot(nba_dat$EFF, nba_dat$Salary, pch = 16, col = rgb(1, 0.5, 0, 0.3),
main = "Scatterplot of Efficiency and Salary", xlab = "EFF", ylab = "Salary")
#lowess smooth line
lines(lowess(nba_dat$EFF, nba_dat$Salary), lwd = 3, col = "Pink")
#scatterplot between Efficiency and Salary
plot(nba_dat$EFF, nba_dat$Salary, pch = 16, col = rgb(1, 0.5, 0, 0.3),
main = "Scatterplot of Efficiency and Salary", xlab = "EFF", ylab = "Salary")
#lowess smooth line
lines(lowess(nba_dat$EFF, nba_dat$Salary), lwd = 3, col = rgb(1,0,0.5))
#scatterplot between Efficiency and Salary
plot(nba_dat$EFF, nba_dat$Salary, pch = 16, col = rgb(1, 0.5, 0, 0.3),
main = "Scatterplot of Efficiency and Salary", xlab = "EFF", ylab = "Salary")
#lowess smooth line
lines(lowess(nba_dat$EFF, nba_dat$Salary), lwd = 3, col = rgb(1,0,0.5))
text(33, 2.5, labels = "lowess")
#scatterplot between Efficiency and Salary
plot(nba_dat$EFF, nba_dat$Salary, pch = 16, col = rgb(1, 0.5, 0, 0.3),
main = "Scatterplot of Efficiency and Salary", xlab = "EFF", ylab = "Salary")
#lowess smooth line
lines(lowess(nba_dat$EFF, nba_dat$Salary), lwd = 3, col = rgb(1,0,0.5))
text(33, 25000000, labels = "lowess", col = rgb(1,0,0.5))
cor(nba_dat$EFF, nba_dat$Salary)
players2 <- nba_dat[nba_dat$MPG >= 20,]
players2
plot(players2$EFF, players2$Salary, main = "Experienced players' scatterplot of EEF and Salary",
xlab = "EEF", ylab = "Salary", pch = 16, col = rgb(1,0,1, 0.3))
#scatterplot
plot(players2$EFF, players2$Salary, main = "Experienced players' scatterplot of EEF and Salary",
xlab = "EEF", ylab = "Salary", pch = 16, col = rgb(1,0,1, 0.3))
#lowess line
lines(lowess(players2$EFF, players2$Salary), col = rgb(0,0.5,1), lwd = 3 )
#scatterplot
plot(players2$EFF, players2$Salary, main = "Experienced players' scatterplot of EEF and Salary",
xlab = "EEF", ylab = "Salary", pch = 16, col = rgb(1,0,1, 0.3))
#lowess line
lines(lowess(players2$EFF, players2$Salary), col = rgb(0,0.5,1), lwd = 3)
text(34, 23000000, labels = "lowess",col = rgb(0,0.5,1))
text(30, 22000000, labels = "lowess",col = rgb(0,0.5,1))
#scatterplot
plot(players2$EFF, players2$Salary, main = "Experienced players' scatterplot of EEF and Salary",
xlab = "EEF", ylab = "Salary", pch = 16, col = rgb(1,0,1, 0.3))
#lowess smooth line
lines(lowess(players2$EFF, players2$Salary), col = rgb(0,0.5,1), lwd = 3)
text(30, 22000000, labels = "lowess",col = rgb(0,0.5,1))
#scatterplot
plot(players2$EFF, players2$Salary, main = "Experienced players' scatterplot of EEF and Salary",
xlab = "EEF", ylab = "Salary", pch = 16, col = rgb(1,0,1, 0.3))
#lowess smooth line
lines(lowess(players2$EFF, players2$Salary), col = rgb(0,0.5,1), lwd = 3)
text(32, 22000000, labels = "lowess",col = rgb(0,0.5,1))
#scatterplot
plot(players2$EFF, players2$Salary, main = "Experienced players' scatterplot of EEF and Salary",
xlab = "EEF", ylab = "Salary", pch = 16, col = rgb(1,0,1, 0.3))
#lowess smooth line
lines(lowess(players2$EFF, players2$Salary), col = rgb(0,0.5,1), lwd = 3)
text(32, 21000000, labels = "lowess",col = rgb(0,0.5,1))
cor(players2$EFF, players2$Salary)
install.packages(c("dplyr", "ggplot2"))
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
dat <- read.csv('~/Documents/UC_Berkeley/Stat133/Lab04/nba2017-players.csv', stringsAsFactors = FALSE)
dat <- read.csv('~/UC_Berkeley/Stat133/Lab04/nba2017-players.csv', stringsAsFactors = FALSE)
slice(dat, 1:5)
slice(dat, seq(from = 10, to = 50, by = 5))
slice(dat, (nrow(dat) - 5):nrow(dat))
slice(dat, (nrow(dat) - 4):nrow(dat))
filter(dat, height < 70)
filter(dat, height < 70)
filter(dat, team == "GSW")
gsw <- filter(dat, team == "GSW")
gsw
filter(gsw, position == "C")
select(filter(dat, team == "LAL"), player)
select(filter(dat, team == "GSW" & position == "PG"), player, salary)
select(filter(dat, experience > 10 & salary <= 10000000), player, age, team)
slice(select(filter(dat,experience == 0 & age == 20), player, team, height, weight),1:5)
gsw <- mutate(gsw, product = height * weight)
gsw
gsw2 <- mutate(gsw, product = height * weight)
gsw2
gsw3 <- mutate(gsw, log_height = log(height), log_weight = log(weight))
gsw3
arrange(filter(dat, height < 71), height)
slice(select(arrange(dat, des(salary)), player, team, salary), 1:5)
slice(select(arrange(dat, desc(salary)), player, team, salary), 1:5)
slice(select(arrange(dat, desc(points3)), player, team, points3), 1: 10)
gsw_mpg <- select(gsw, player, experience)
gsw_mpg <- mutate(gsw, min_per_game = minutes / game )
gsw_mpg <- mutate(gsw, min_per_game = minutes / games )
gsw_mpg <- select(gsw_mpg, player, experience, min_per_game)
arrange(gsw_mpg, min_per_game)
summarise(desc(height))
summarise(dat, desc(height))
summarise(arrange(dat, desc(height)))
summarise(dat, max(height))
summarise(dat, sd(points3))
summarise(
group_by(dat,team),
median(points3)
)
slice(
arrange(
summarise(
group_by(dat, team),
average_points3 = mean(points3)
),
average_points3
),
1:5
)
slice(
arrange(
summarise(
group_by(dat, team),
average_points3 = mean(points3)
),
average_points3
),
1:5
)
summarise(
filter(dat, 5 <= experience <= 10),
summarise(
filter(dat, experience >= 5 & experience <= 10 & position == "PF"),
mean(age),
sd(age)
)
ggplot(gsw) +
geom_point(aes(x = height, y = weight))
ggplot(gsw) +
geom_point(aes(x = height, y = weight)) +
geom_text(aes(player))
ggplot(gsw) +
geom_point(aes(x = height, y = weight)) +
geom_label(aes(player))
?geom_text
ggplot(gsw) +
geom_point(aes(x = height, y = weight)) +
geom_text(mapping = TRUE, aes(player))
ggplot(gsw) +
geom_point(aes(x = height, y = weight)) +
geom_text(mapping = aes(x = height, y = weight), aes(player))
ggplot(gsw) +
geom_point(aes(x = height, y = weight)) +
geom_text(mapping = aes(x = height, y = weight), data = aes(player))
ggplot(gsw) +
geom_point(aes(x = height, y = weight)) +
geom_text(aes(label = player))
ggplot(gsw) +
geom_point(aes(x = height, y = weight)) +
geom_text(aes(label = player), x = 0, y = 0)
ggplot(gsw) +
geom_point(aes(x = height, y = weight, label = player)) +
geom_text(aes(label = player), x = 0, y = 0)
ggplot(gsw) +
geom_point(aes(x = height, y = weight, label = player)) +
geom_text()
ggplot(gsw) +
geom_point(aes(x = height, y = weight, label = player)) +\
ggplot(gsw, aes(x = height, y = weight, label = player) ) +
geom_point() +
geom_text()
ggplot(gsw, aes(x = height, y = weight, label = player) ) +
geom_point() +
geom_text(size = 1)
ggplot(gsw, aes(x = height, y = weight, label = player) ) +
geom_point() +
geom_text(size = 10)
ggplot(gsw, aes(x = height, y = weight, label = player) ) +
geom_point() +
geom_text(size = 5)
ggplot(gsw, aes(x = height, y = weight, label = player) ) +
geom_point() +
geom_text(size = 3)
ggplot(gsw, aes(x = height, y = weight, label = player) ) +
geom_point() +
geom_text(size = 3, hjust = -0.5)
ggplot(gsw, aes(x = height, y = weight, label = player) ) +
geom_point() +
geom_text(size = 3, vjust = -0.5)
ggplot(gsw, aes(x = height, y = weight, label = player) ) +
geom_point() +
geom_text(size = 3, vjust = 0.5)
ggplot(gsw, aes(x = height, y = weight, label = player) ) +
geom_point() +
geom_text(size = 3, vjust = 1)
ggplot(gsw, aes(x = height, y = weight, label = player) ) +
geom_point() +
geom_text(size = 3, vjust = 1.5, hjust = 0.3)
ggplot(gsw, aes(x = height, y = weight, label = player)) +
geom_label()
ggplot(gsw, aes(x = height, y = weight, label = player)) +
geom_label(size = 3, alpha = 0.5)
ggplot(gsw, aes(x = height, y = weight, label = player)) +
geom_label(size = 3, alpha = 0.5, hjust = 0.5)
ggplot(gsw, aes(x = height, y = weight, label = player)) +
geom_label(size = 3, alpha = 0.5, hjust = 1)
ggplot(gsw, aes(x = height, y = weight, label = player)) +
geom_label(size = 3, alpha = 0.5, hjust = -1)
ggplot(gsw, aes(x = height, y = weight, label = player)) +
geom_label(size = 3, alpha = 0.5)
ggplot(dat, aes(x = salary)) +
geom_density()
ggplot(dat, aes(x = points2)) +
geom_histogram(binwidth = 50)
ggplot(dat, aes(position)) +
geom_bar()
ggplot(dat, aes(x = experience, y = salary)) +
geom_point() +
geom_smooth()
ggplot(filter(dat, position == "C"), aes(x = experience, y = salary)) +
geom_point() +
geom_smooth()
ggplot(filter(dat, position == "C"), aes(x = experience, y = salary)) +
geom_point() +
geom_smooth(method = regression)
?geom_smooth
ggplot(filter(dat, position == "C"), aes(x = experience, y = salary)) +
geom_point() +
geom_smooth(method = "rlm")
ggplot(filter(dat, position == "C"), aes(x = experience, y = salary)) +
geom_point() +
geom_smooth(method = rlm)
ggplot(filter(dat, position == "C"), aes(x = experience, y = salary)) +
geom_point() +
geom_smooth(method = lm)
ggplot(filter(dat, position == "C"), aes(x = experience, y = salary)) +
geom_point() +
geom_smooth()
ggplot(dat, aes(x = experience, y = salary)) +
geom_point(aes(color = position), alpha = 0.7) +
facet_wrap(position ~ .)
ggplot(dat, aes(x = experience, y = salary)) +
geom_point(aes(color = position), alpha = 0.7) +
facet_wrap( ~ position)
ggplot(dat, aes(x = experience, y = salary)) +
geom_point(aes(color = team), alpha = 0.7) +
facet_wrap( ~ team)
ggplot(dat, aes(x = age)) +
geom_density(aes(color = team)) +
facet_wrap(team)
ggplot(dat, aes(x = age)) +
geom_density(aes(color = team)) +
facet_wrap(~ team)
ggplot(dat, aes(x = height, y = weight)) +
geom_point(aes(color = position)) +
facet_wrap(~ position)
ggplot(dat, aes(x = height, y = weight)) +
geom_density2d(aes(color = position)) +
facet_wrap(~ position)
gsw_mpg <- mutate(gsw, min_per_game = minutes / games )
gsw_mpg <- select(gsw_mpg, player, experience, min_per_game)
arrange(gsw_mpg, min_per_game)
gsw_mpg <- mutate(gsw, min_per_game = minutes / games )
gsw_mpg <- select(gsw_mpg, player, experience, min_per_game)
arrange(gsw_mpg, min_per_game)
rm(list = ls())
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
dat <- read.csv('~/UC_Berkeley/Stat133/Lab04/nba2017-players.csv', stringsAsFactors = FALSE)
slice(dat, 1:5)
slice(dat, seq(from = 10, to = 50, by = 5))
slice(dat, (nrow(dat) - 4):nrow(dat))
filter(dat, height < 70)
gsw <- filter(dat, team == "GSW")
gsw
filter(gsw, position == "C")
select(filter(dat, team == "LAL"), player)
select(filter(dat, team == "GSW" & position == "PG"), player, salary)
select(filter(dat, experience > 10 & salary <= 10000000), player, age, team)
slice(select(filter(dat,experience == 0 & age == 20), player, team, height, weight),1:5)
# creating a small data frame step by step
gsw <- filter(dat, team == 'GSW')
gsw <- select(gsw, player, height, weight)
gsw <- slice(gsw, c(4, 8, 10, 14, 15))
gsw
gsw2 <- mutate(gsw, product = height * weight)
gsw2
gsw3 <- mutate(gsw, log_height = log(height), log_weight = log(weight))
gsw3
arrange(filter(dat, height < 71), height)
slice(select(arrange(dat, desc(salary)), player, team, salary), 1:5)
slice(select(arrange(dat, desc(points3)), player, team, points3), 1: 10)
view(gsw)
head(gsw)
gsw_mpg <- mutate(filter(dat, team == "GSW"), min_per_game = minutes / games )
gsw_mpg <- select(gsw_mpg, player, experience, min_per_game)
arrange(gsw_mpg, min_per_game)
?ggplot
ggplot(gsw, aes(x = height, y = weight, label = player), xlim = c(60, 90)) +
geom_label(size = 3, alpha = 0.5)
ggplot(gsw, aes(x = height, y = weight, label = player), xlim = c(60, 90), ylim = c(150, 300)) +
geom_label(size = 3, alpha = 0.5)
ggplot(gsw, aes(x = height, y = weight, label = player)) +
geom_label(size = 3, alpha = 0.5)
ggplot(gsw, aes(x = height, y = weight, label = player)) +
geom_label(size = 3, alpha = 0.5)
knitr::opts_chunk$set(echo = TRUE)
github <- "https://github.com/ucb-stat133/stat133-fall-2017/raw/master/"
csv <- "data/nba2017-players.csv"
download.file(url = paste0(github, csv), destfile = './code/nba2017-players.csv')
github <- "https://github.com/ucb-stat133/stat133-fall-2017/raw/master/"
csv <- "data/nba2017-players.csv"
download.file(url = paste0(github, csv), destfile = '/code/nba2017-players.csv')
github <- "https://github.com/ucb-stat133/stat133-fall-2017/raw/master/"
csv <- "data/nba2017-players.csv"
download.file(url = paste0(github, csv), destfile = '/data/nba2017-players.csv')
github <- "https://github.com/ucb-stat133/stat133-fall-2017/raw/master/"
csv <- "data/nba2017-players.csv"
download.file(url = paste0(github, csv), destfile = 'data/nba2017-players.csv')
write.csv()
?write.csv
warriors <- arrange(filter(raw_dat, team == "GSW"), salary)
library(readr)    # importing data
library(dplyr)    # data wrangling
library(ggplot2)  # graphics
raw_dat <- read_csv("nba2017-player.csv")
raw_dat <- read_csv("data/nba2017-player.csv")
raw_dat <- read_csv("~/data/nba2017-player.csv")
getwd
getwd()
setwd("./UC_Berkely/Stat133/lab06/code")
setwd("~/UC_Berkely/Stat133/lab06/code")
setwd("~/UC_Berkeley/Stat133/lab06/code")
raw_dat <- read_csv("../data/nba2017-player.csv")
setwd("../data")
raw_dat <- read_csv("nba2017-player.csv")
getwd()
setwd
setwd("../code")
raw_dat <- read_csv("../data/nba2017-player.csv")
raw_dat <- read_csv("../data/nba2017-player")
raw_dat <- read_csv("../data/nba2017-players.csv")
raw_dat <- read_csv(
"../data/nba2017-players.csv",
position = col_factor()
)
raw_dat <- read_csv(
"../data/nba2017-players.csv",
col_types = (position = col_factor())
)
raw_dat <- read_csv("../data/nba2017-players.csv")
warriors <- arrange(filter(raw_dat, team == "GSW"), salary)
write.csv(warriors, file = "../data/warriors.csv", row.names = FALSE)
lakers <- arrange(filter(raw_dat, team == "LAL"), desc(experience))
write.csv(lakers, file = "../data/lakers.csv", row.names = FALSE)
sink(file = "../output/data-structure.txt")
str(raw_dat)
sink()
sink(file = "../output/summary-warriors.txt")
summary(warriors)
sink()
sink(file = "../output/summary-lakers.txt")
summary(warriors)
sink()
?png
png(filename = "../images/scatterplot-of-height-weight.png")
plot(raw_dat$height, raw_dat$weight, pch = 20, xlab = 'Height', ylab = 'Height')
dev.off()
png(filename = "../images/scatterplot-of-height-weight.png")
plot(raw_dat$height, raw_dat$weight, pch = 20, xlab = 'Height', ylab = 'Weight')
dev.off()
png(filename = "../images/scatterplot-of-height-weight-higher-resolution.png",
pointsize = 20)
plot(raw_dat$height, raw_dat$weight, pch = 20, xlab = 'Height', ylab = 'Weight')
dev.off()
?hist
jepg(filename = "../images/histogram-of-age", width = 600, height = 400)
jpeg(filename = "../images/histogram-of-age", width = 600, height = 400)
hist(raw_dat$age, main = "Age")
dev.off()
jpeg(filename = "../images/histogram-of-age.jpeg", width = 600, height = 400)
hist(raw_dat$age, main = "Age")
dev.off()
hist(raw_dat$age, xlab = "Age")
dev.off()
jpeg(filename = "../images/histogram-of-age.jpeg", width = 600, height = 400)
hist(raw_dat$age, xlab = "Age")
dev.off()
?pdf
pdf(filename = "../images/histogram-of-age.pdf", width = 7, height = 5)
hist(raw_dat$age, xlab = "Age", main = "Histogram of Age")
dev.off()
?pdf
pdf(file = "../images/histogram-of-age.pdf", width = 7, height = 5)
hist(raw_dat$age, xlab = "Age", main = "Histogram of Age")
dev.off()
?ggsave
?ggplot
ggplot(data = raw_dat, aes(x = points, y = salary)) +
geom_point()
ggsave(filename = "../images/points_salary.pdf", width = 7, height = 7)
gg_ht_wt_positions <- ggplot(data = raw_dat, aes(x = height, y = weight)) +
geom_point(col = aes(position)) +
facet_wrap(~ position)
ggsave(filename = "height_weight_by_position.pdf", width = 6, height = 4)
gg_ht_wt_positions <- ggplot(data = raw_dat, aes(x = height, y = weight)) +
geom_point(col = aes(position)) +
facet_wrap(~ position)
ggsave(filename = "../images/height_weight_by_position.pdf", width = 6, height = 4)
?ggsave
gg_ht_wt_positions <- ggplot(data = raw_dat, aes(x = height, y = weight)) +
geom_point(col = aes(position)) +
facet_wrap(~ position)
ggsave(filename = "../images/height_weight_by_position.pdf",
plot= gg_ht_wt_positions, width = 6, height = 4)
gg_ht_wt_positions <- ggplot(data = raw_dat, aes(x = height, y = weight)) +
geom_point(col = aes(position)) +
facet_wrap(~ position)
ggsave(filename = "../images/height_weight_by_position.pdf",
plot = gg_ht_wt_positions, width = 6, height = 4)
gg_ht_wt_positions <- ggplot(data = raw_dat, aes(x = height, y = weight)) +
geom_point(col = aes(position)) +
facet_wrap(~ position)
ggsave(filename = "../images/height_weight_by_position.pdf",
plot = gg_ht_wt_positions, width = 6, height = 4, units = "in")
gg_ht_wt_positions
gg_ht_wt_positions <- ggplot(data = raw_dat, aes(x = height, y = weight)) +
geom_point() +
facet_wrap(~ position)
gg_ht_wt_positions
gg_ht_wt_positions <- ggplot(data = raw_dat, aes(x = height, y = weight)) +
geom_point(aes(col = position)) +
facet_wrap(~ position)
gg_ht_wt_positions
ggsave(filename = "../images/height_weight_by_position.pdf",
plot = gg_ht_wt_positions, width = 6, height = 4, units = "in")
select(lakers, player)
lakers %>%
select(player)
select(player, salary)
gsw %>%
filter(position == "PG") %>%
select(player, salary)
warriors %>%
filter(position == "PG") %>%
select(player, salary)
raw_dat %>%
filter(experience > 10 & salary <= 10000000) %>%
select(player, age, team)
raw_dat
raw_dat %>%
filter(experience = 0 & age = 20) %>%
select(player, team, height, weight) %>%
slice(1 : 5)
raw_dat %>%
filter(experience == 0 & age == 20) %>%
select(player, team, height, weight) %>%
slice(1 : 5)
print(
lakers %>%
select(player)
)
gsw_mpg <- warriors %>%
mutate(min_per_game = minutes / games) %>%
select(player, experience, min_per_game) %>%
arrange(desc(min_per_game))
gsw_mpg
raw_dat %>%
group_by(team) %>%
ave_points3 = mean(points3) %>%
summarise() %>%
arrange(ave_points3) %>%
slice(1:5)
raw_dat %>%
group_by(team) %>%
summarise(ave_points3 = mean(points3)) %>%
arrange(ave_points3) %>%
slice(1:5)
raw_dat %>%
filter(position == "PF" & (experience == 5 | experience == 10)) %>%
summarise(mean(age), sd(age))
